(this["webpackJsonppretty-things"]=this["webpackJsonppretty-things"]||[]).push([[0],{30:function(t,e,n){t.exports=n(37)},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var r=n(4),i=n.n(r),o=n(20),a=n.n(o),c=(n(35),n(36),n(5)),s=n(8),u=n(16),h=n(15),d=n(17),l=function(){function t(){Object(c.a)(this,t),this.delta=0,this.firstTick=Date.now(),this.lastTick=Date.now()}return Object(s.a)(t,[{key:"tick",value:function(){var t=Date.now();return this.delta=Date.now()-this.lastTick,this.lastTick=t,this.getDelta()}},{key:"getDelta",value:function(){return this.delta}},{key:"getTotalTime",value:function(){return Date.now()-this.firstTick}}]),t}(),v=n(21),m=n(42),f=n(41),p=n(40),g=(n(39),function(t,e,n,r){var i=x(t,t.VERTEX_SHADER,e),o=x(t,t.FRAGMENT_SHADER,n),a=t.createProgram();return t.attachShader(a,i),t.attachShader(a,o),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)?{program:a,attribLocations:{vertexPosition:t.getAttribLocation(a,"vertex")},uniformLocations:m.a(f.a,{},p.a((function(e){return Object(v.a)({},e,t.getUniformLocation(a,e))}),r))}:(console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(a)),null)}),x=function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)},w=n(3),b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.b.create(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{shape:t,children:n,transform:e,uniformData:r}},M=function(t,e,n,r,i){var o=t.createVertexArray();return t.bindVertexArray(o),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint32Array(n),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,3,t.FLOAT,!0,0,0),{mode:r,program:i,indexCount:n.length,vao:o}},P=function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=[],c=[],s=0;s<=t;++s)for(var u=s*Math.PI/t,h=Math.sin(u),d=Math.cos(u),l=0;l<=e;++l){var v=2*l*Math.PI/e,m=Math.sin(v),f=Math.cos(v),p=f*h*i[0],g=d*i[1],x=m*h*i[2];a.push(n*p+r[0]),a.push(n*g+r[1]),a.push(n*x+r[2])}for(var w=0;w<t;++w)for(var b=0;b<e;++b){var M=w*(e+1)+b+o,P=M+e+1;c.push(M),c.push(P),c.push(M+1),c.push(P),c.push(P+1),c.push(M+1)}return{vertices:a,indices:c}},y=function(t,e){return[Math.sin(e)*Math.cos(t),Math.sin(e)*Math.sin(t),Math.cos(e)]},S=function(t,e){var n=function(t,e,n,r,i){for(var o=i/e,a=[],c=[],s=0;s<=e;s++)for(var u=0;u<n;u++){var h=2*Math.PI/n*u;if(a=a.concat([Math.cos(h)*r,s*o,Math.sin(h)*r]),s!=e){var d=n*s+u,l=n*(s+1)+u,v=u==n-1?n*s:n*s+u+1,m=u==n-1?n*(s+1):n*(s+1)+u+1;c=c.concat([v,l,d,m,l,v])}}return M(t,a,c,t.TRIANGLES,null)}(t,10,9,.01,1);return b(n,void 0,void 0,{mode:1})},k=function(t){var e=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0],o=P(e,n,r,i);return M(t,o.vertices,o.indices,t.TRIANGLES,null)}(t,10,10,.05,[0,1,0]),n=w.b.create();return b(e,n,void 0,{mode:2})},R=[1,3,5,7,10,13,10,7,5,3,1],A=function(t){var e=Date.now(),n=S(t),r=k(t),i=function(t){for(var e=[],n=[],r=[],i=[],o=0,a=0;a<R.length;a++)for(var c=0;c<R[a];c++){var s=Math.PI/(R.length-1)*a,u=2*Math.PI/R[a]*c,h=y(u,s),d=y(u+.7,s),l=y(u-.7,s),v=y(u+.35,s+.35),m=[.04*h[0],.04*h[1]+1,.04*h[2],.19*h[0],.19*h[1]+1,.19*h[2],.19*h[0]+.08*d[0],.19*h[1]+.08*d[1]+1,.19*h[2]+.08*d[2],.19*h[0]+.08*l[0],.19*h[1]+.08*l[1]+1,.19*h[2]+.08*l[2],.19*h[0]+.08*v[0],.19*h[1]+.08*v[1]+1,.19*h[2]+.08*v[2]],f=5*o,p=[f,f+1,f+1,f+2,f+1,f+3,f+1,f+4];e=e.concat(m),n=n.concat(p),r=r.concat([.19*h[0]+.08*d[0],.19*h[1]+.08*d[1]+1,.19*h[2]+.08*d[2],.19*h[0]+.08*l[0],.19*h[1]+.08*l[1]+1,.19*h[2]+.08*l[2],.19*h[0]+.08*v[0],.19*h[1]+.08*v[1]+1,.19*h[2]+.08*v[2]]),i=i.concat([3*o,3*o+1,3*o+2]),o++}var g=M(t,r,i,t.POINTS,null),x=b(g,void 0,void 0,{mode:4}),P=M(t,e,n,t.LINES,null),S=w.b.create();return b(P,S,[x],{mode:3})}(t),o=w.b.create();w.b.translate(o,o,[0,-.7,-.5]),w.b.scale(o,o,[1.4,1.4,1.4]);var a=Date.now()-e;return console.log("Generating dandelion took: "+a+"ms."),b(void 0,o,[n,r,i])},E=["modelMatrix","cameraMatrix","projectionMatrix","lightLocation","mode","headRot"],L="#version 300 es\n  #define M_PI 3.1415926535897932384626433832795\n  uniform mat4 projectionMatrix;\n  uniform mat4 cameraMatrix;\n  uniform mat4 modelMatrix;\n  uniform float headRot;\n  uniform int mode;\n  layout(location = 1) in vec3 vertex;\n  layout(location = 2) in vec3 previousVertex;\n  out highp vec3 vertexPos;\n  flat out int imode;\n\n  vec4 moveStem(vec4 v) {\n    float h = vertex.y;\n    vec4 moved = vec4(0.0, 0.0, 0.0, 1.0);\n    moved.z = v.z;\n    moved.x = cos(headRot) * v.x - sin(headRot) * v.y;\n    moved.y = sin(headRot) * v.x + cos(headRot) * v.y;\n    vec4 interpolated = (1.0-pow(h,1.2)) * v + (pow(h,1.2)) * moved;\n    return interpolated;\n  }\n\n  vec4 moveHead(vec4 v) {\n    vec4 moved = vec4(0.0, 0.0, 0.0, 1.0);\n    moved.z = v.z;\n    moved.x = cos(headRot) * v.x - sin(headRot) * v.y;\n    moved.y = sin(headRot) * v.x + cos(headRot) * v.y;\n    return moved;\n  }\n\n  void main() {\n    imode = mode;\n    highp vec4 v4Pos = vec4(vertex, 1.0);\n    highp vec4 transVertex = v4Pos;\n    if(mode == ".concat(1,") {\n      transVertex = moveStem(transVertex);\n    } else {\n      transVertex = moveHead(transVertex);\n    }\n    if(mode == ").concat(4,") {\n      gl_PointSize = 7.0;\n    }\n    transVertex = modelMatrix * transVertex;\n    vertexPos = transVertex.xyz / transVertex.w;\n    gl_Position = projectionMatrix * cameraMatrix * transVertex;\n  }\n"),T="#version 300 es\n  uniform mediump vec3 lightLocation;\n  in highp vec3 vertexPos;\n  flat in int imode;\n  out highp vec4 outColor;\n\n  void main() {\n    if(imode == ".concat(4,") {\n      mediump vec2 coord = gl_PointCoord.xy - vec2(0.5, 0.5);\n      if(coord.x * coord.x + coord.y * coord.y > 0.25) discard;\n    }\n    mediump vec3 color = vec3(0.0, 0.0, 0.0);\n    mediump float ambient = 0.3;\n    mediump vec3 lightDir = normalize(lightLocation - vertexPos);\n    outColor = vec4(0.0, 0.0, 0.0, 1.0);\n  }\n"),C=function(){function t(e){Object(c.a)(this,t),this.size=e,this.pointer=0,this.stack=[];for(var n=0;n<e;n++)this.stack.push(w.b.create())}return Object(s.a)(t,[{key:"push",value:function(){if(this.pointer==this.size-1)throw"MatrixStack out of bounds";this.pointer++,w.b.copy(this.stack[this.pointer],this.stack[this.pointer-1])}},{key:"pop",value:function(){this.pointer--}},{key:"mulTop",value:function(t){w.b.mul(this.stack[this.pointer],this.stack[this.pointer],t)}},{key:"get",value:function(){return this.stack[this.pointer]}}]),t}(),D=function t(e,n){var r=this;Object(c.a)(this,t),this.gl=e,this.engine=n,this.defaultProgram=null,this.rootComponent=null,this.currentProgram=null,this.matrixStack=new C(16),this.projectionMatrix=w.b.create(),this.cameraMatrix=w.b.create(),this.lightLocation=[5,5,0],this.wind=-.13,this.init=function(t,e){var n=r.gl;n.clearColor(1,1,1,1),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),r.defaultProgram=g(n,L,T,E),r.rootComponent=b(null,void 0,[A(n)]),r.updateSize(t,e),r.setupCamera(),r.bindProgram(r.defaultProgram)},this.updateWind=function(){var t=r.engine.timer.getTotalTime()/1e3;r.wind=-(Math.sin(Math.cos(t+.5+2*Math.sin(2*t)+2*Math.cos(.5*t)))+1)/14},this.updateSize=function(t,e){w.b.perspective(r.projectionMatrix,w.a.toRadian(90),t/e,.1,100)},this.setupCamera=function(){w.b.translate(r.cameraMatrix,r.cameraMatrix,[0,-.3,-1])},this.draw=function(t){var e=r.gl;e.clear(e.COLOR_BUFFER_BIT),r.drawComponent(r.rootComponent),r.updateWind()},this.drawComponent=function(t){var e=t.shape;r.matrixStack.push(),r.matrixStack.mulTop(t.transform),null!=e&&r.renderShape(t);var n=!0,i=!1,o=void 0;try{for(var a,c=t.children[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var s=a.value;r.drawComponent(s)}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}r.matrixStack.pop(),r.bindProgram(null)},this.renderShape=function(t){var e=r.gl,n=t.shape;r.prepareProgram(n),r.prepareUniforms(t),e.bindVertexArray(null===n||void 0===n?void 0:n.vao),e.drawElements(n.mode,n.indexCount,e.UNSIGNED_INT,0)},this.prepareUniforms=function(t){var e,n=r.gl,i=null===(e=r.currentProgram)||void 0===e?void 0:e.uniformLocations.modelMatrix;for(var o in n.uniformMatrix4fv(i,!1,r.matrixStack.get()),t.uniformData){var a,c=null===(a=r.currentProgram)||void 0===a?void 0:a.uniformLocations[o];n.uniform1i(c,t.uniformData[o])}},this.prepareProgram=function(t){null==t.program?r.bindProgram(r.defaultProgram):r.bindProgram(t.program)},this.bindProgram=function(t){var e=r.gl;if(null==t)return r.currentProgram=null,void e.useProgram(null);r.currentProgram!==t&&(e.useProgram(t.program),e.uniformMatrix4fv(t.uniformLocations.projectionMatrix,!1,r.projectionMatrix),e.uniformMatrix4fv(t.uniformLocations.cameraMatrix,!1,r.cameraMatrix),e.uniform1f(t.uniformLocations.headRot,r.wind),r.currentProgram=t)}},j=function t(e,n,r){var i=this;Object(c.a)(this,t),this.gl=void 0,this.running=!1,this.timer=new l,this.renderer=void 0,this.start=function(){i.running=!0,i.animate()},this.stop=function(){i.running=!1},this.animate=function(){i.draw(),i.running&&requestAnimationFrame(i.animate)},this.init=function(t,e){i.renderer.init(t,e)},this.draw=function(){var t=i.timer.tick();i.renderer.draw(t)},this.updateSize=function(t,e){i.renderer.updateSize(t,e)},this.gl=e,this.renderer=new D(e,this),this.init(n,r)},O=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(s.a)(e,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var t=this;return i.a.createElement("canvas",{width:2*this.props.width,height:2*this.props.height,ref:function(e){return e?t.props.contextRef(e.getContext("webgl2")):null},style:{width:this.props.width,height:this.props.height}})}}]),e}(r.Component),_=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(i)))).state={engine:null,width:0,height:0},n.updateDimensions=function(){var t;console.log("update!"),n.setState({width:window.innerWidth,height:window.innerHeight}),null===(t=n.state.engine)||void 0===t||t.updateSize(window.innerWidth,window.innerHeight)},n.saveContext=function(t){n.setState({engine:new j(t,window.innerWidth,window.innerHeight)})},n}return Object(d.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions),this.updateDimensions()}},{key:"componentWillUnmount",value:function(){var t;null===(t=this.state.engine)||void 0===t||t.stop(),window.removeEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var t;return null===(t=this.state.engine)||void 0===t||t.start(),i.a.createElement(O,{width:window.innerWidth,height:window.innerHeight,contextRef:this.saveContext})}}]),e}(r.Component),I=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"desc"},i.a.createElement("h1",null)),i.a.createElement(_,null," "))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.3e72965f.chunk.js.map